<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Lichat</title>
    <link rel="stylesheet" href="stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="lichat.js"></script>
  </head>
  <body>
    <div class="client">
      <nav>
        <section class="server" v-for="client in clients">
          <header>
            <img class="icon" v-bind:src="client.icon">
            <span class="name">{{client.name || client.servername}}</span>
            <nav>
              <a class="settings">
                <i class="fas fa-ellipsis-h"></i>
              </a>
            </nav>
          </header>
          <ul class="channels">
            <li class="channel" v-for="channel in client.channels"
                v-bind:class="{current: channel == currentChannel, update: 0 < channel.unread, alert: channel.alerted}">
              <header>
                <img class="icon" v-bind:src="channel.icon">
                <span class="name">{{channel.name}}</span>
              </header>
              <div class="unread-count">{{channel.unread}}</div>
            </li>
          </ul>
        </section>
      </nav>
      <div class="divider"></div>
      <main v-if="currentChannel">
        <header>
          <img class="icon" v-bind:src="currentChannel.icon">
          <span class="name">{{currentChannel.name}}</span>
          <span class="topic">{{currentChannel.topic}}</span>
          <nav>
            <a class="search">
              <i class="fas fa-search"></i>
            </a>
            <a class="info">
              <i class="fas fa-info-circle"></i>
            </a>
            <a class="settings">
              <i class="fas fa-ellipsis-h"></i>
            </a>
          </nav>
        </header>
        <section class="output">
          <div class="message" v-for="message in currentChannel.messages"
               v-bind:class="{alert: message.isAlert}">
            <header>
              <time>{{message.time}}</time>
              <img class="icon" v-bind:src="message.author.icon">
              <span class="name" v-bind:class="{me: message.author == currentChannel.client.user}">{{message.author.name}}</span>
            </header>
            <div class="content">
              <img v-if="message.type == 'image'" v-bind:src="message.text">
              <video controls v-else-if="message.type == 'video'">
                <source v-bind:src="message.text" v-bind:type="message['content-type']">
              </video>
              <audio controls v-else-if="message.type == 'audio'">
                <source v-bind:src="message.text" v-bind:type="message['content-type']">
              </audio>
              <p v-else>
                {{message.text}}
              </p>
              <div class="reactions">
                <a class="reaction" v-for="reaction in message.reactions">
                  <i v-if="reaction.text">{{reaction.text}}</i>
                  <img v-else v-bind:src="reaction.image">
                  <span>{{reaction.count}}</span>
                </a>
              </div>
            </div>
            <nav>
              <a class="edit">
                <i class="fas fa-edit"></i>
              </a>
              <a class="reply">
                <i class="fas fa-reply"></i>
              </a>
              <a class="react">
                <i class="fas fa-surprise"></i>
              </a>
              <a class="settings">
                <i class="fas fa-ellipsis-h"></i>
              </a>
            </nav>
          </div>
        </section>
        <footer>
          <div class="user me">
            <img class="icon" v-bind:src="currentChannel.client.user.icon">
          </div>
          <textarea placeholder="Write something..." autofocus></textarea>
          <nav>
            <a class="emote">
              <i class="fas fa-smile"></i>
            </a>
            <a class="upload">
              <i class="fas fa-paperclip"></i>
            </a>
          </nav>
        </footer>
        </section>
    </div>
    <script>var lichat = new LichatUI();</script>
  </body>
</html>
